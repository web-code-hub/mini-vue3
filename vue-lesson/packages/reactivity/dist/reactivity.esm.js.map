{
  "version": 3,
  "sources": ["../../shared/src/index.ts", "../src/effect.ts", "../src/reactiveEffect.ts", "../src/baseHandle.ts", "../src/reactive.ts", "../src/ref.ts", "../src/computed.ts"],
  "sourcesContent": ["export function isObject(value){\r\n    return typeof value === 'object' && value !== null\r\n}\r\nexport function isFunction(value){\r\n    return typeof value === 'function'\r\n}", "import {DirtyLeave} from \"./constants\";\r\n\r\nexport class ReactiveEffect {\r\n    public active = true // \u662F\u5426\u6FC0\u6D3B\r\n    public _trackId = 0; // effect\u6807\u8BC6\r\n    public _depsLength = 0; // \u4F9D\u8D56\u957F\u5EA6\r\n    public _running = false;\r\n    public deps = [] // \u4F9D\u8D56\u96C6\u5408\r\n    public _dirty = DirtyLeave.Dirty\r\n\r\n    constructor(public fn, public scheduler?) {\r\n    }\r\n\r\n    public get _dirtyLeave() {\r\n        return this._dirty === DirtyLeave.Dirty\r\n    }\r\n\r\n    public set _dirtyLeave(value) {\r\n        this._dirty = value ? DirtyLeave.Dirty : DirtyLeave.NoDirty\r\n    }\r\n\r\n    run() {\r\n        this._dirty = DirtyLeave.NoDirty\r\n        if (!this.active) this.fn() // \u975E\u6FC0\u6D3B\u72B6\u6001\u76F4\u63A5\u6267\u884C\u51FD\u6570\r\n        let lastActiveEffect = activeEffect // \u5907\u4EFD\u4E0A\u4E00\u4E2A\u6FC0\u6D3B\u7684effect\r\n        try {\r\n            activeEffect = this // \u5F53\u524D\u6FC0\u6D3B\u7684effect\r\n            perCleanupEffect(this) // \u6E05\u9664\u4F9D\u8D56\r\n            this._running = true\r\n            return this.fn()\r\n        } finally {\r\n            postCleanupEffect(this)\r\n            this._running = false\r\n            activeEffect = lastActiveEffect // \u6062\u590D\u4E0A\u4E00\u4E2A\u6FC0\u6D3B\u7684effect\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n *\r\n * @param effect // effect\u5B9E\u4F8B\r\n */\r\nfunction perCleanupEffect(effect) {\r\n    effect._depsLength = 0\r\n    effect._trackId++;\r\n}// \u6E05\u9664\u4F9D\u8D56\r\n\r\n/**\r\n *\r\n * @param effect \u6FC0\u6D3B\u7684effect\r\n */\r\nfunction postCleanupEffect(effect) { // \u6062\u590D\u4F9D\u8D56\r\n    if (effect.deps.length > effect._depsLength) { // \u5220\u9664\u591A\u4F59\u7684\u4F9D\u8D56\r\n        for (let i = effect._depsLength; i < effect.deps.length; i++) {\r\n            cleanEffect(effect.deps[i], effect)\r\n        }\r\n        effect.deps.length = effect._depsLength // \u622A\u53D6\u4F9D\u8D56\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param dep // \u8981\u5220\u9664\u7684\u4F9D\u8D56\r\n * @param effect // \u5220\u9664\u7684\u4F9D\u8D56\u7684effect\r\n */\r\nfunction cleanEffect(dep, effect) {\r\n    dep.delete(effect)\r\n    if (dep.size === 0) dep.cleanDep()\r\n\r\n} // \u6E05\u9664\u4F9D\u8D56\r\n\r\nexport let activeEffect; // \u5F53\u524D\u6FC0\u6D3B\u7684effect\r\n\r\n/**\r\n *\r\n * @param fn // \u8981\u6267\u884C\u7684\u51FD\u6570\r\n * @param options // \u9009\u9879\r\n */\r\nexport function effect(fn: Function, options?) { // \u521B\u5EFAeffect\r\n    const _effect = new ReactiveEffect(fn, () => { // \u8C03\u5EA6\u5668\r\n        _effect.run() // \u6267\u884Ceffect\r\n    })\r\n    _effect.run()\r\n    if (options) {\r\n        Object.assign(_effect, options)\r\n    }\r\n    const runner = _effect.run.bind(_effect) // \u521B\u5EFA runner\r\n    runner.effect = _effect // \u7ED1\u5B9Aeffect\r\n    return runner // \u8FD4\u56DE runner\r\n}\r\n\r\n/**\r\n *\r\n * @param effect // effect \u5B9E\u4F8B\r\n * @param dep  // \u4F9D\u8D56\r\n */\r\n\r\nexport function trackEffects(effect, dep) {\r\n    if (dep.get(effect) !== effect._trackId) { // \u907F\u514D\u91CD\u590D\u6536\u96C6\r\n        dep.set(effect, effect._trackId) // \u6DFB\u52A0\u4F9D\u8D56\r\n        const oldDep = effect.deps[effect._depsLength] // \u83B7\u53D6\u8001\u7684\u4F9D\u8D56\r\n        if (oldDep !== dep) { // \u907F\u514D\u91CD\u590D\u6DFB\u52A0\r\n            if (oldDep) { // \u6E05\u7406\u8001\u7684\u4F9D\u8D56\r\n                cleanEffect(oldDep, effect)\r\n            }\r\n            effect.deps[effect._depsLength++] = dep // \u91CD\u65B0\u6DFB\u52A0\u4F9D\u8D56\r\n        } else {\r\n            effect._depsLength++ // \u4F9D\u8D56\u957F\u5EA6\u81EA\u589E\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n *\r\n * @param dep \u4F9D\u8D56\r\n */\r\n\r\nexport function triggerEffect(dep) {\r\n    for (const effect of dep.keys()) {\r\n        if(effect._dirty < DirtyLeave.Dirty){\r\n            effect._dirty = DirtyLeave.Dirty\r\n        }\r\n        if (!effect._running) {\r\n            if (effect.scheduler) {\r\n                effect.scheduler()\r\n            }\r\n        }\r\n    }\r\n}\r\n", "import {activeEffect, trackEffects, triggerEffect} from \"./effect\";\r\n\r\nconst targetMap = new WeakMap() // \u5B58\u50A8\u4F9D\u8D56\r\n\r\nexport const createDep = (cleanDep, key) => {\r\n    const dep = new Map() as any\r\n    dep.cleanDep = cleanDep\r\n    dep.name = key\r\n    return dep;\r\n}\r\n\r\nexport function track(target, key) {\r\n    if (activeEffect) { // \u6709\u6FC0\u6D3B\u7684effect\u624D\u6536\u96C6\u4F9D\u8D56\r\n        let depsMap = targetMap.get(target) // \u83B7\u53D6\u5BF9\u8C61\u7684\u4F9D\u8D56\r\n        if (!depsMap) { // \u6CA1\u6709\u4F9D\u8D56\u5C31\u521B\u5EFA\u4E00\u4E2A\r\n            targetMap.set(target, depsMap = new Map()) // \u521B\u5EFA\u5BF9\u8C61\u7684\u4F9D\u8D56\r\n        }\r\n        let dep = depsMap.get(key) // \u83B7\u53D6\u5C5E\u6027\u7684\u4F9D\u8D56           \r\n        if (!dep) { // \u6CA1\u6709\u4F9D\u8D56\u5C31\u521B\u5EFA\u4E00\u4E2A\r\n            depsMap.set(\r\n                key,\r\n                dep = createDep(() => depsMap.delete(key), key) // \u521B\u5EFA\u5C5E\u6027\u7684\u4F9D\u8D56\r\n            )\r\n        }\r\n        trackEffects(activeEffect, dep) // \u6536\u96C6\u4F9D\u8D56\r\n    } else {\r\n        return false\r\n    }\r\n}\r\n\r\nexport function trigger(target, key) {\r\n    const depsMap = targetMap.get(target) // \u83B7\u53D6\u5BF9\u8C61\u7684\u4F9D\u8D56\r\n    if (!depsMap) return false; // \u6CA1\u6709\u4F9D\u8D56\u76F4\u63A5\u8FD4\u56DE\r\n    const dep = depsMap.get(key) // \u83B7\u53D6\u5C5E\u6027\u7684\u4F9D\u8D56\r\n    if (!dep) return false; // \u6CA1\u6709\u4F9D\u8D56\u76F4\u63A5\u8FD4\u56DE\r\n    triggerEffect(dep) // \u89E6\u53D1\u66F4\u65B0\r\n}\r\n", "import {isObject} from \"@vue/shared\";\r\nimport {track, trigger} from \"./reactiveEffect\";\r\nimport {reactive} from \"./reactive\";\r\n\r\n\r\n\r\n/**\r\n * \u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\r\n */\r\nexport const mutabaleHandlers: ProxyHandler<object> = {\r\n    get(target, key, receiver) {\r\n        if (key === ReactiveFlags.IS_REACTIVE) true // \u54CD\u5E94\u5F0F\u6807\u8BC6\r\n        const result = Reflect.get(target, key, receiver) // \u83B7\u53D6\u5C5E\u6027\u503C\r\n\r\n\r\n        track(target, key) // \u6536\u96C6\u4F9D\u8D56\r\n        if (isObject(result)) reactive(result) // \u5982\u679C\u5C5E\u6027\u503C\u662F\u5BF9\u8C61\u5C31\u8FDB\u884C\u4EE3\u7406\r\n        return result // \u901A\u8FC7Reflect\u83B7\u53D6\u503C\r\n    },\r\n    set(target, key, value, recetiver) { // \u8BBE\u7F6E\u503C\r\n        // \u89E6\u53D1\u66F4\u65B0\r\n        const oldValue = target[key]\r\n        const result = Reflect.set(target, key, value, recetiver) // \u901A\u8FC7Reflect\u8BBE\u7F6E\u503C\r\n        if (oldValue !== value) {\r\n            trigger(target, key) // \u89E6\u53D1\u66F4\u65B0\r\n        }\r\n        return result\r\n    },\r\n    deleteProperty(target: object, key: string): boolean {\r\n        const had = key in target     // \u2460 \u771F\u6B63\u5224\u65AD key \u662F\u5426\u5B58\u5728\r\n        delete target[key]            // \u2461 \u5220\u503C\r\n        if (had) {\r\n            console.log('[delete trigger]', key)   // \u8C03\u8BD5\u7528\r\n            trigger(target, key)\r\n        } // \u2462 \u5B58\u5728\u624D\u89E6\u53D1\r\n        return true\r\n    }\r\n}", "import { isObject } from \"@vue/shared\";\r\nimport { mutabaleHandlers } from \"./baseHandle\";\r\nimport {ReactiveFlags} from './constants'\r\nconst reactiveMap = new WeakMap(); // key:target value:proxy\r\n\r\n\r\nexport function reactive(target) { // \u54CD\u5E94\u5F0F\u51FD\u6570\r\n    return createReactive(target);\r\n}\r\nfunction createReactive(target) { // \u521B\u5EFA\u54CD\u5E94\u5F0F\u51FD\u6570\r\n    !isObject && target // \u4E0D\u662F\u5BF9\u8C61\u76F4\u63A5\u8FD4\u56DE\r\n    target[ReactiveFlags.IS_REACTIVE] && target // \u5DF2\u7ECF\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61\u76F4\u63A5\u8FD4\u56DE\r\n\r\n    const existingProxy = reactiveMap.get(target) // \u5DF2\u7ECF\u88AB\u4EE3\u7406\u8FC7\u76F4\u63A5\u8FD4\u56DE\r\n    existingProxy && existingProxy // \u7F13\u5B58\u4E2D\u6709\u76F4\u63A5\u8FD4\u56DE\r\n\r\n    const proxy = new Proxy(target, mutabaleHandlers) // \u521B\u5EFA\u4EE3\u7406\r\n    reactiveMap.set(target, proxy) // \u7F13\u5B58\u4EE3\u7406\r\n    return proxy // \u8FD4\u56DE\u4EE3\u7406\r\n}\r\nexport function toReactive(value) {\r\n    return isObject(value) ? reactive(value) : value\r\n}", "import { activeEffect, trackEffects, triggerEffect } from \"./effect\";\r\nimport { toReactive } from \"./reactive\";\r\nimport { createDep } from \"./reactiveEffect\";\r\n\r\n/**\r\n * \u521B\u5EFA\u4E00\u4E2A\u54CD\u5E94\u5F0F\u7684 ref \u5BF9\u8C61\r\n * @param value - \u521D\u59CB\u503C\uFF0C\u53EF\u4EE5\u662F\u4EFB\u610F\u7C7B\u578B\r\n * @returns \u8FD4\u56DE\u4E00\u4E2A\u5E26\u6709 value \u5C5E\u6027\u7684 ref \u5BF9\u8C61\r\n */\r\nexport function ref(value) {\r\n    return createRef(value)\r\n}\r\n/**\r\n * \u521B\u5EFA RefImpl \u5B9E\u4F8B\u7684\u5DE5\u5382\u51FD\u6570\r\n * @param value - \u9700\u8981\u5305\u88C5\u6210 ref \u7684\u503C\r\n * @returns RefImpl \u5B9E\u4F8B\r\n */\r\nfunction createRef(value) {\r\n    return new RefImpl(value)\r\n}\r\n/**\r\n * Ref \u5B9E\u73B0\u7C7B\uFF0C\u7528\u4E8E\u5305\u88C5\u57FA\u672C\u7C7B\u578B\u7684\u503C\u4F7F\u5176\u5177\u6709\u54CD\u5E94\u6027\r\n */\r\nclass RefImpl {\r\n     public _v_isRef = true  // ref \u5BF9\u8C61\u6807\u8BC6\u7B26\r\n    public _value: any      // \u5B58\u50A8\u54CD\u5E94\u5F0F\u503C\r\n    public dep: any         // \u4F9D\u8D56\u6536\u96C6\u5BB9\u5668\r\n     /**\r\n     * \u6784\u9020\u51FD\u6570\r\n     * @param public rawValue - \u539F\u59CB\u503C\r\n     */\r\n    constructor(public rawValue) {\r\n        this._value = toReactive(rawValue)\r\n    }\r\n     /**\r\n     * getter \u8BBF\u95EE\u5668\uFF0C\u7528\u4E8E\u83B7\u53D6 ref \u7684\u503C\r\n     * @returns \u5F53\u524D\u503C\r\n     */\r\n    get value() {\r\n        trackRef(this)\r\n        return this._value\r\n    }\r\n    /**\r\n     * setter \u8BBF\u95EE\u5668\uFF0C\u7528\u4E8E\u8BBE\u7F6E ref \u7684\u503C\r\n     * @param newValue - \u65B0\u503C\r\n     */\r\n    set value(newValue) {\r\n        // \u53EA\u6709\u5F53\u65B0\u503C\u4E0E\u65E7\u503C\u4E0D\u540C\u65F6\u624D\u89E6\u53D1\u66F4\u65B0\r\n        if (newValue !== this.rawValue) {\r\n            this.rawValue = newValue\r\n            this._value = newValue\r\n            // \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\r\n            triggerValueRef(this)\r\n        }\r\n    }\r\n}\r\n/**\r\n * \u5BF9\u8C61\u5C5E\u6027\u5F15\u7528\u5B9E\u73B0\u7C7B\uFF0C\u7528\u4E8E\u521B\u5EFA\u6307\u5411\u5BF9\u8C61\u7279\u5B9A\u5C5E\u6027\u7684 ref\r\n */\r\nclass ObjectRefImpl {\r\n     /**\r\n     * \u6784\u9020\u51FD\u6570\r\n     * @param public object - \u76EE\u6807\u5BF9\u8C61\r\n     * @param public key - \u76EE\u6807\u5C5E\u6027\u952E\r\n     */\r\n    constructor(public object, public key) { }\r\n     /**\r\n     * getter \u8BBF\u95EE\u5668\uFF0C\u83B7\u53D6\u76EE\u6807\u5BF9\u8C61\u6307\u5B9A\u5C5E\u6027\u7684\u503C\r\n     * @returns \u76EE\u6807\u5C5E\u6027\u7684\u503C\r\n     */\r\n    get value() {\r\n        return this.object[this.key]\r\n    }\r\n     /**\r\n     * setter \u65B9\u6CD5\uFF0C\u8BBE\u7F6E\u76EE\u6807\u5BF9\u8C61\u6307\u5B9A\u5C5E\u6027\u7684\u503C\r\n     * @param value - \u65B0\u503C\r\n     */\r\n    set(value) {\r\n        this.object[this.key] = value\r\n    }\r\n}\r\n/**\r\n * \u4E3A ref \u6536\u96C6\u4F9D\u8D56\r\n * @param ref - RefImpl \u5B9E\u4F8B\r\n */\r\nexport function trackRef(ref) {\r\n    // \u53EA\u6709\u5728\u5B58\u5728\u6FC0\u6D3B\u7684 effect \u65F6\u624D\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\r\n    activeEffect && trackEffects(activeEffect, ref.dep = createDep(() => (ref.dep = undefined), 'undefined'))\r\n\r\n}\r\n/**\r\n * \u89E6\u53D1 ref \u7684\u4F9D\u8D56\u66F4\u65B0\r\n * @param ref - RefImpl \u5B9E\u4F8B\r\n */\r\nexport function triggerValueRef(ref) {\r\n    // \u53EA\u6709\u5F53\u5B58\u5728\u4F9D\u8D56\u65F6\u624D\u89E6\u53D1\u66F4\u65B0\r\n    ref.dep && triggerEffect(ref.dep)\r\n}\r\n/**\r\n * \u521B\u5EFA\u6307\u5411\u5BF9\u8C61\u6307\u5B9A\u5C5E\u6027\u7684 ref\r\n * @param object - \u76EE\u6807\u5BF9\u8C61\r\n * @param key - \u5C5E\u6027\u952E\r\n * @returns ObjectRefImpl \u5B9E\u4F8B\r\n */\r\nexport function toRef(object, key) {\r\n    return new ObjectRefImpl(object, key)\r\n}\r\n/**\r\n * \u5BF9\u8C61\u5C5E\u6027\u7684\u5F15\u7528\u96C6\u5408\r\n * \u5C06\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684\u6240\u6709\u5C5E\u6027\u8F6C\u6362\u4E3A refs\r\n * @param object - \u54CD\u5E94\u5F0F\u5BF9\u8C61\r\n * @returns \u5305\u542B\u6240\u6709\u5C5E\u6027\u5BF9\u5E94 refs \u7684\u5BF9\u8C61\r\n */\r\nexport function toRefs(object) {\r\n    const result = {}\r\n    for (const key in object) {\r\n        result[key] = toRef(object, key)\r\n    }\r\n    return result\r\n}\r\n/**\r\n * \u5C06\u5305\u542B refs \u7684\u5BF9\u8C61\u8F6C\u6362\u4E3A\u4EE3\u7406\u5BF9\u8C61\r\n * \u4F7F\u5F97\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE ref \u7684\u503C\u800C\u4E0D\u9700\u8981 .value\r\n * @param objectWithRefs - \u5305\u542B refs \u7684\u5BF9\u8C61\r\n * @returns \u4EE3\u7406\u5BF9\u8C61\r\n */\r\nexport function proxyRefs(objectWithRefs) {\r\n    return new Proxy(objectWithRefs, {\r\n         /**\r\n         * \u62E6\u622A\u5BF9\u8C61\u5C5E\u6027\u7684\u8BFB\u53D6\u64CD\u4F5C\r\n         * @param target - \u76EE\u6807\u5BF9\u8C61\r\n         * @param key - \u5C5E\u6027\u952E\r\n         * @param receiver - \u4EE3\u7406\u5BF9\u8C61\r\n         * @returns \u5C5E\u6027\u503C\r\n         */\r\n        get(target, key, receiver) {\r\n            return Reflect.get(target, key, receiver)\r\n        },\r\n        /**\r\n         * \u62E6\u622A\u5BF9\u8C61\u5C5E\u6027\u7684\u8BBE\u7F6E\u64CD\u4F5C\r\n         * @param target - \u76EE\u6807\u5BF9\u8C61\r\n         * @param key - \u5C5E\u6027\u952E\r\n         * @param value - \u65B0\u503C\r\n         * @param redeceiver - \u4EE3\u7406\u5BF9\u8C61\r\n         * @returns boolean \u64CD\u4F5C\u662F\u5426\u6210\u529F\r\n         */\r\n        set(target, key, value, redeceiver) {\r\n            const oldValue = target[key]\r\n            if (oldValue._v_isRef) {\r\n                oldValue.value = value\r\n                return true\r\n            } else {\r\n                return Reflect.set(target, key, value, redeceiver)\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\n", "import {isFunction} from \"@vue/shared\";\r\nimport {ReactiveEffect} from \"./effect\";\r\nimport {trackRef, triggerValueRef} from \"./ref\";\r\n\r\n/**\r\n * ComputedRefImpl \u7C7B\u5B9E\u73B0\u4E86\u8BA1\u7B97\u5C5E\u6027\u7684\u6838\u5FC3\u903B\u8F91\r\n * \u5B83\u901A\u8FC7 ReactiveEffect \u6765\u8FFD\u8E2A\u4F9D\u8D56\u5E76\u7F13\u5B58\u8BA1\u7B97\u7ED3\u679C\r\n */\r\nclass ComputedRefImpl {\r\n    public _value:()=>void|undefined;         // \u7F13\u5B58\u8BA1\u7B97\u7ED3\u679C\u7684\u503C\r\n    public effect: ReactiveEffect;         // \u54CD\u5E94\u5F0F\u526F\u4F5C\u7528\uFF0C\u7528\u4E8E\u6267\u884C getter \u5E76\u6536\u96C6\u4F9D\u8D56\r\n    public dep;            // \u4F9D\u8D56\u96C6\u5408\uFF0C\u7528\u4E8E\u5B58\u50A8\u8BA2\u9605\u8BE5\u8BA1\u7B97\u5C5E\u6027\u7684\u526F\u4F5C\u7528\r\n\r\n    /**\r\n     * \u6784\u9020\u51FD\u6570\u521D\u59CB\u5316\u8BA1\u7B97\u5C5E\u6027\r\n     * @param getter - \u8BA1\u7B97\u5C5E\u6027\u7684 getter \u51FD\u6570\r\n     * @param setter - \u8BA1\u7B97\u5C5E\u6027\u7684 setter \u51FD\u6570\r\n     */\r\n    constructor(public getter, public setter) {\r\n        // \u521B\u5EFA\u54CD\u5E94\u5F0F\u526F\u4F5C\u7528\uFF0C\u5F53\u4F9D\u8D56\u66F4\u65B0\u65F6\u4F1A\u89E6\u53D1\u8C03\u5EA6\u5668\u51FD\u6570\r\n        this.effect = new ReactiveEffect(() => getter(this._value), () => {\r\n            // \u5F53\u4F9D\u8D56\u53D8\u5316\u65F6\u89E6\u53D1\u66F4\u65B0\u901A\u77E5\r\n            triggerValueRef(this)\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \u83B7\u53D6\u8BA1\u7B97\u5C5E\u6027\u7684\u503C\r\n     * \u5982\u679C\u6570\u636E\u662F\u810F\u7684\uFF08_dirty \u4E3A true\uFF09\uFF0C\u5219\u91CD\u65B0\u8BA1\u7B97\u5E76\u8DDF\u8E2A\u4F9D\u8D56\r\n     * \u5426\u5219\u76F4\u63A5\u8FD4\u56DE\u7F13\u5B58\u7684\u503C\r\n     */\r\n    get value() {\r\n        if (this.effect._dirty) {\r\n            // \u6267\u884C\u8BA1\u7B97\u83B7\u53D6\u65B0\u503C\r\n            this._value = this.effect.run();\r\n            // \u8DDF\u8E2A\u8BE5\u8BA1\u7B97\u5C5E\u6027\u7684\u4F9D\u8D56\r\n            trackRef(this)\r\n        } else {\r\n            // \u8FD4\u56DE\u7F13\u5B58\u7684\u503C\r\n            return this._value\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \u8BBE\u7F6E\u8BA1\u7B97\u5C5E\u6027\u7684\u503C\r\n     * \u8C03\u7528 setter \u51FD\u6570\u5904\u7406\u8D4B\u503C\u64CD\u4F5C\r\n     * @param v - \u8981\u8BBE\u7F6E\u7684\u65B0\u503C\r\n     */\r\n    set value(v) {\r\n        this.setter(v)\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * \u521B\u5EFA\u4E00\u4E2A\u8BA1\u7B97\u5C5E\u6027\r\n * @param getterOrOptions - getter \u51FD\u6570\u6216\u5305\u542B get/set \u7684\u914D\u7F6E\u5BF9\u8C61\r\n * @returns ComputedRefImpl \u5B9E\u4F8B\r\n */\r\nexport function computed(getterOrOptions) {\r\n    // \u5224\u65AD\u4F20\u5165\u53C2\u6570\u662F\u5426\u4EC5\u4E3A getter \u51FD\u6570\r\n    const onlyGetter = isFunction(getterOrOptions)\r\n    let getter, setter;\r\n    \r\n    if (onlyGetter) {\r\n        // \u5982\u679C\u53EA\u6709 getter\uFF0C\u5219\u76F4\u63A5\u4F7F\u7528\u4F20\u5165\u7684\u51FD\u6570\u4F5C\u4E3A getter\r\n        getter = getterOrOptions\r\n        // \u63D0\u4F9B\u4E00\u4E2A\u7A7A\u51FD\u6570\u4F5C\u4E3A setter\r\n        setter = () => {\r\n        }\r\n    } else {\r\n        // \u5982\u679C\u662F\u914D\u7F6E\u5BF9\u8C61\uFF0C\u5219\u5206\u522B\u63D0\u53D6 getter \u548C setter\r\n        getter = getterOrOptions.get;\r\n        setter = getterOrOptions.set;\r\n    }\r\n    \r\n    // \u8FD4\u56DE ComputedRefImpl \u5B9E\u4F8B\r\n    return new ComputedRefImpl(getter, setter)\r\n}"],
  "mappings": "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",
  "names": ["effect", "ref"]
}
